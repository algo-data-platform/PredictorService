cc_library(
	name="xgboost",
	#optimize = ['funroll-loops', 'msse2', 'fopenmp'],
	srcs = [
		'src/logging.cc',
		'src/predictor/predictor.cc',
		'src/altered/cpu_predictor.cc', # for thread-safe, replace mutual variable with local variable
		'src/learner.cc',
		'src/common/host_device_vector.cc',
		'src/common/common.cc',
		'src/common/hist_util.cc',
		'src/metric/metric.cc',
		'src/metric/rank_metric.cc',
		'src/metric/elementwise_metric.cc',
		'src/metric/multiclass_metric.cc',
		'src/objective/hinge.cc',
		'src/objective/multiclass_obj.cc',
		'src/objective/objective.cc',
		'src/objective/rank_obj.cc',
		'src/objective/regression_obj.cc',
		'src/data/sparse_page_dmatrix.cc',
		'src/data/sparse_page_source.cc',
		'src/data/sparse_page_writer.cc',
		'src/data/simple_csr_source.cc',
		'src/data/data.cc',
		'src/data/sparse_page_raw_format.cc',
		'src/data/simple_dmatrix.cc',
		'src/tree/updater_prune.cc',
		'src/tree/tree_updater.cc',
		'src/tree/updater_refresh.cc',
		'src/tree/updater_sync.cc',
		'src/tree/split_evaluator.cc',
		'src/tree/updater_skmaker.cc',
		'src/tree/updater_colmaker.cc',
		'src/tree/updater_histmaker.cc',
		'src/tree/tree_model.cc',
		'src/tree/updater_fast_hist.cc',
		'src/altered/gbtree.cc', # for thread-safe, replace mutual variable with local variable
		'src/gbm/gblinear.cc',
		'src/gbm/gbm.cc', 
		'src/c_api/c_api.cc', 
		'src/c_api/c_api_error.cc',
		'src/linear/linear_updater.cc',
		'src/linear/updater_shotgun.cc',
		'src/linear/updater_coordinate.cc',
	],
	incs = [
		'./include',
		'./dmlc-core/include',
		'./rabit/include',
		'./src/gbm',
		'./src/predictor',
	],
	deps = [
		'//thirdparty/xgboost/rabit:rabit',
		'//thirdparty/xgboost/dmlc-core:dmlc',

	],
	defs = [
		'DDMLC_LOG_CUSTOMIZE=1',
	],
	warning='no',
)

cc_library(
	name="xgboostnosafe",
	#optimize = ['funroll-loops', 'msse2', 'fopenmp'],
	srcs = [
		'src/logging.cc',
		'src/predictor/predictor.cc',
		'src/predictor/cpu_predictor.cc',
		'src/learner.cc',
		'src/common/host_device_vector.cc',
		'src/common/common.cc',
		'src/common/hist_util.cc',
		'src/metric/metric.cc',
		'src/metric/rank_metric.cc',
		'src/metric/elementwise_metric.cc',
		'src/metric/multiclass_metric.cc',
		'src/objective/hinge.cc',
		'src/objective/multiclass_obj.cc',
		'src/objective/objective.cc',
		'src/objective/rank_obj.cc',
		'src/objective/regression_obj.cc',
		'src/data/sparse_page_dmatrix.cc',
		'src/data/sparse_page_source.cc',
		'src/data/sparse_page_writer.cc',
		'src/data/simple_csr_source.cc',
		'src/data/data.cc',
		'src/data/sparse_page_raw_format.cc',
		'src/data/simple_dmatrix.cc',
		'src/tree/updater_prune.cc',
		'src/tree/tree_updater.cc',
		'src/tree/updater_refresh.cc',
		'src/tree/updater_sync.cc',
		'src/tree/split_evaluator.cc',
		'src/tree/updater_skmaker.cc',
		'src/tree/updater_colmaker.cc',
		'src/tree/updater_histmaker.cc',
		'src/tree/tree_model.cc',
		'src/tree/updater_fast_hist.cc',
		'src/gbm/gbtree.cc',
		'src/gbm/gblinear.cc',
		'src/gbm/gbm.cc', 
		'src/c_api/c_api.cc', 
		'src/c_api/c_api_error.cc',
		'src/linear/linear_updater.cc',
		'src/linear/updater_shotgun.cc',
		'src/linear/updater_coordinate.cc',
	],
	incs = [
		'./include',
		'./dmlc-core/include',
		'./rabit/include',
		'./src/gbm',
		'./src/predictor',
	],
	deps = [
		'//thirdparty/xgboost/rabit:rabit',
		'//thirdparty/xgboost/dmlc-core:dmlc',

	],
	defs = [
		'DDMLC_LOG_CUSTOMIZE=1',
	],
	warning='no',
)
